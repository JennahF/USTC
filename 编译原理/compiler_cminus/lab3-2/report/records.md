# 团队工作记录

记录团队的学习过程和讨论过程，

## 学习过程

描述队长如何安排成员进行学习工作，并描述完成情况

## 讨论1

时间：12月1日 20时到22时
地点：3A一楼大厅
参与者：孙书情，范睿
主题：明确lab3-2的实验要求，具体操作

![屏幕快照 2019-12-01 下午10.13.31](figs/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202019-12-01%20%E4%B8%8B%E5%8D%8810.13.31.png)

![屏幕快照 2019-12-01 下午10.13.52](figs/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202019-12-01%20%E4%B8%8B%E5%8D%8810.13.52.png)

### 过程描述：

1. 具体一起学习了助教在gitlab上发布的readme文件，
2. 并配置好了环境（eg：安装了opt），
3. 尝试利用编写非常简单的c代码以及.ll代码执行opt优化命令，尝试进行简单的对比。


### 结论

1. 对于dce优化命令尝试成功，大致理解了机器的实现过程
2. 但对于constprop，尾递归命令没有写出测试文件，或者说写了一些测试文件，但执行优化命令后得到的IR代码和源代码相同，并未出现什么区别，因此这两个命令还有待研究。
3. 上网查资料时偶然间查询到了另一个优化命令instcombine:冗余代码优化，得到的优化显著，但是此次实验并不需要。

##讨论2

时间：12月6日 20时到23时30分
地点：电三楼406楼
参与者：孙书情，范睿，王晶
主题：阅读lab3-2代码adce.cpp和constprop.cpp 函数，查阅相关书籍（LLVM CookBook），明确不同类型的Pass的作用。

### 过程描述：

1. 所有组员先是进行初步分工：
   - 孙书情：考虑参考资料的搜集与阅读，opt的可视化，初步编写一个简单的遍历函数的pass.cpp
   - 范睿：主要阅读adce.cpp源码。
   - 王晶：主要阅读constprop.cpp源码并编写简单的测试.ll文件
2. 在大约进行一个小时的阅读之后，大家整体感觉源码阅读有难度，转而查询相关资料，这期间搜寻到一本llvm较好的入门书：LLVM CookBook，里面以具体的例子对代码以及终端优化指令进行介绍。

### 结论

1. 阅读一些入门书籍比直接阅读源码要轻松，也更容易小白上手。
2. 搜索能力很重要。

## 讨论3

时间：12月7日 10时到22时
地点：电四楼-1层
参与者：孙书情，范睿，王晶
主题：阅读代码，完成报告

### 过程描述

1. 范睿和孙书情阅读adce和constprop的源码，理解源码中的逻辑，将源码的流程图画出来
2. 王晶查找和编写测试样例
3. 孙书情将测试样例的CFG和dom的图画出来
4. 范睿和王晶利用流程图和控制流图和测试样例完成实验报告

### 结论

深入地理解了常量传播和死代码删除的流程，对控制流图、支配树有了更深的认识。对llvm的与机器无关的优化方法也有了头绪，对c++的语法等也学习到了更多的细节。